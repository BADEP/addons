<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
	
	<!-- ACTIONS -->
		<record id="action_project_offer" model="ir.actions.act_window">
			<field name="name">Offres</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">project.offer</field>
			<field name="view_type">form</field>
			<field name="view_mode">kanban,tree,form</field>
		</record>
	 	<record id="action_project_submission" model="ir.actions.act_window">
			<field name="name">Soumissions</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">project.submission</field>
			<field name="view_type">form</field>
			<field name="view_mode">kanban,tree,form</field>
		</record>
		<record id="action_project_candidate" model="ir.actions.act_window">
			<field name="name">Candidats</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">res.users</field>
			<field name="view_type">form</field>
			<field name="view_mode">kanban,tree,form</field>
		</record>
	   	<record id="action_project_request" model="ir.actions.act_window">
			<field name="name">Demandes de ressources</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">project.request</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
		</record>

		<record id="action_project_offer_type" model="ir.actions.act_window">
			<field name="name">Types d'offre</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">project.offer.type</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
		</record>
		<record id="action_project_offer_field" model="ir.actions.act_window">
			<field name="name">Thématique</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">project.offer.field</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
		</record>
		<record id="action_project_budgetline_type" model="ir.actions.act_window">
			<field name="name">Types de lignes de budget</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">project.budgetline.type</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
		</record>
		<record id="action_project_request_type" model="ir.actions.act_window">
			<field name="name">Types d'offre</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">project.request.type</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
		</record>
		<record id="action_project_partner_function" model="ir.actions.act_window">
			<field name="name">Titres</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">project.partner.function</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
		</record>
		<record id="action_project_submission_task_type" model="ir.actions.act_window">
			<field name="name">Types d'activité</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">project.submission.task.type</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
		</record>
		<record id="action_project_lot_type" model="ir.actions.act_window">
			<field name="name">Types de livrable</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">project.lot.type</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
		</record>
		<!-- FILTERS -->
		<record id="view_offer_filter" model="ir.ui.view">
			<field name="name">offer</field>
			<field name="model">project.offer</field>
			<field name="arch" type="xml">
				<search string="offers">
					<filter domain="[('state','=','open')]" string="In Position"/>
					<field name="name"/>
					<field name="host"/>
					<group expand="0" string="Group By">
						
					</group>
				</search>
			</field>
		</record>
   
		<record id="view_project_submission_filter" model="ir.ui.view">
			<field name="name">Soumissions</field>
			<field name="model">project.submission</field>
			<field name="arch" type="xml">
				<search string="Rechercher les soumissions">
					<field name="name"/>
					<field name="candidate"/>
					<filter string="My" domain="[('manager', '=', uid)]"/>
					<filter string="Non assigné" domain="[('manager', '=', False)]"/>
					<separator/>
					<filter string="Next Actions" context="{'invisible_next_action':False, 'invisible_next_date':False}"
						domain="[('date_action','&lt;&gt;',False)]" help="Filter and view on next actions and date"/>
					<separator/>
					<filter string="New Mail" name="message_unread" domain="[('message_unread','=',True)]"/>
					<field name="offer"/>
					<field name="field_ids"/>
					<field name="manager"/>
					<separator/>
					<group expand="0" string="Group By">
						<filter string="Etat" domain="[]"  context="{'group_by':'state'}"/>
						<filter string="Candidat" domain="[]"  context="{'group_by':'candidate'}"/>
						<filter string="Responsable" domain="[]"  context="{'group_by':'manager'}"/>
						<filter string="Offre" domain="[]" context="{'group_by':'offer'}"/>
						<filter string="Organisme" domain="[]" context="{'group_by':'organisme'}"/>
					</group>
			   </search>
			</field>
		</record>

		<record id="view_ir_attachment_filter" model="ir.ui.view">
			<field name="name">Documents</field>
			<field name="model">ir.attachment</field>
			<field name="inherit_id" ref="base.view_attachment_search"></field>
			<field name="arch" type="xml">
				<group position="inside">
					<filter name="parent_id" string="Répertoire" domain="[]" context="{'group_by':'parent_id'}"/>
					<filter name="res_model" string="Modèle" domain="[]" context="{'group_by':'res_model'}"/>
				</group>
			</field>
		</record>

		<!-- KANBAN -->
		<record id="view_project_offer_kanban" model="ir.ui.view">
			<field name="name">project.offer.kanban</field>
			<field name="model">project.offer</field>
			<field name="arch" type="xml">
				<kanban class="oe_background_grey" default_group_by="state">
					<field name="name"/>
					<field name="type"/>
					<field name="submissions_count"/>
					<field name="color"/>
					<field name="submissions"/>
					<field name="documents"/>
					<field name="accepted_count"/>
					<field name="manager"/>
					<field name="state"/>
					<templates>
						<t t-name="kanban-box">
							<div t-attf-class="oe_kanban_color_#{kanban_getcolor(record.color.raw_value)} oe_kanban_job oe_kanban_card oe_kanban_global_click">
								<div class="oe_dropdown_toggle oe_dropdown_kanban oe_custom">
									<span class="oe_e">í</span>
									<ul class="oe_dropdown_menu">
										<t t-if="widget.view.is_action_enabled('edit')">
											<li><a type="edit">Edit...</a></li>
										</t>
										<t t-if="widget.view.is_action_enabled('delete')">
											<li><a type="delete">Delete</a></li>
										</t>
										<li><ul class="oe_kanban_colorpicker" data-field="color"/></li>
									</ul>
								</div>
								<div class="oe_kanban_content">
									<div class="oe_job_detail">
										<div class="text-center oe_job oe_name oe_kanban_ellipsis">
											<field name="name"/>
										</div>
										<div class="text-center oe_job oe_department oe_kanban_ellipsis">
											<strong><field name="type"/>
											<span t-if="record.manager.value" class="oe_manager_name">
											</span></strong>
										</div>
									</div>
									<t t-if="record.state.raw_value == 'open'">
										<div class="oe_applications">
											<a name="%(action_project_submission)d" t-attf-data-context="{'search_default_offer': [{{record.id.raw_value}}], 'default_offer': {{record.id.raw_value}}}" type="action">
												<span><t t-esc="record.submissions.raw_value.length"/> Soumissions</span>
											</a>
											<br/>
											<a t-if="record.documents.raw_value.length gt 0" name="action_get_attachment_tree_view" type="object">
												<span t-if="record.documents.raw_value.length gt 1"><t t-esc="record.documents.raw_value.length"/> Documents</span>
												<span t-if="record.documents.raw_value.length lt 2"><t t-esc="record.documents.raw_value.length"/> Document</span>
											</a>
										</div>
										<div class="oe_job_justgage">
											<field state="open" name="accepted_count" widget="gauge"
												style="margin-top:7px; width:160px; height: 120px;"
												options="{
													'max_field': 'submissions_count',
													'label': 'Soumissions acceptées',
													'force_set': False,
													'gauge_value_field': 'submissions_count',
												}">
												Soumissions acceptées
											</field>
										</div>
									</t>
									<t t-if="record.state.raw_value == 'draft'">
										<div class="oe_start_recruitment">
											<p><b>Cliquez ici</b> pour lancer l'offre</p>
											<img src="/hr_recruitment/static/src/img/down1.png"/>
										</div>
									</t>
									<div class="oe_launch_recruitment">
										<a t-if="record.state.raw_value == 'draft'" data-name="action_open" data-type="object" class="oe_kanban_action">Lancer l'offre</a>
										<a t-if="record.state.raw_value == 'open'" data-name="action_close" data-type="object" class="oe_kanban_action">Clôturer l'offre</a>
									</div>
								</div>
							</div>
						</t>
					</templates>
				</kanban>
			</field>
		</record>
		
		<record model="ir.ui.view" id="view_project_submission_kanban">
			<field name="name">Project Submission kanban</field>
			<field name="model">project.submission</field>
			<field name="arch" type="xml">
				<kanban default_group_by="state">
					<field name="state"/>
					<field name="color"/>
					<field name="manager"/>
					<field name="field_ids"/>
					<field name="offer"/>
					<field name="title_action"/>
					<field name="date_submitted"/>
					<field name="date_processed"/>
					<field name="date_action"/>
					<field name="project"/>
					<field name="budget"/>
					<field name="documents_count"/>
					<field name="candidate"/>
					<field name="message_summary"/>
					<field name="priority"/>
					<field name="partner_mobile"/>
					<field name="acronyme"/>
				   
			   		<templates>
			   		
			   			<t t-name="kanban-tooltip">
							<ul class="oe_kanban_tooltip">
								<li t-if="record.field.raw_value"><b>Thématiques:</b> <field name="field_ids"/></li>
								<li t-if="record.candidate.raw_value"><b>Candidat:</b> <field name="candidate"/></li>
								<li t-if="record.state.raw_value"><b>Etat:</b> <field name="state"/></li>
							</ul>
						</t>
						<t t-name="kanban-box">
							<div t-attf-class="oe_kanban_color_#{kanban_getcolor(record.color.raw_value)} oe_kanban_card oe_kanban_global_click oe_semantic_html_override">
								<div class="oe_dropdown_toggle oe_dropdown_kanban">
									<span class="oe_e">i</span>
									<ul class="oe_dropdown_menu">
										<t t-if="widget.view.is_action_enabled('delete')"><li><a type="delete">Supprimer</a></li></t>
										<li><a name="action_makeMeeting" type="object">Programmer un rendez-vous</a></li>
										<li><ul class="oe_kanban_colorpicker" data-field="color"/></li>
									</ul>
	
								</div>
								
								<div class="oe_kanban_content" tooltip="kanban-tooltip">
									<div>
										<t t-if="record.candidate.raw_value"><b><field name="candidate"/></b><br/></t>
										<i><b><field name="name"/></b> - <field name="acronyme"/></i><br/>
										<field name="offer"/><br/>
										<t t-if="record.partner_mobile.raw_value">Mobile: <field name="partner_mobile"/><br/></t>
									</div>
									<div style="padding-left: 0.5em">
										<t t-if="record.date_action.raw_value and record.date_action.raw_value lt (new Date())" t-set="red">oe_kanban_text_red</t>
										<span t-attf-class="#{red || ''}"><field name="date_action"/></span>
											<t t-if="record.date_action.raw_value"> : </t>
											<field name="title_action"/>
									</div>
									<div style="width:240px">Thématiques: <field name="field_ids"/></div>
									<div style="width:240px">Partenaires: <field name="partners"/></div>
									<div class="oe_kanban_bottom_right">
										<img t-att-src="kanban_image('res.users', 'image_small', record.manager.raw_value)" t-att-title="record.manager.value" width="24" height="24" class="oe_kanban_avatar pull-right"/>
										<div class="pull-left" groups="base.group_user">
											<field name="priority" widget="priority"/>
										</div>
									</div>
									<div class="oe_kanban_footer_left" style="margin-top:5px;">
										<t t-raw="record.message_summary.raw_value"/>
										<a t-if="record.documents_count" name="action_get_attachment_tree_view" type="object" style="margin-right: 10px"> <field name="documents_count"/> Documents</a>
									</div>
								</div>
								<div class="oe_clear"></div>
							</div>
						</t>
			   		</templates>
				</kanban>
			</field>
		</record>

		<record model="ir.ui.view" id="view_project_candidate_kanban">
			<field name="name">project.candidate.kanban</field>
			<field name="model">res.users</field>
			<field name="mode">primary</field>
			<field name="inherit_id" ref="base.res_partner_kanban_view"></field>
			<field name="arch" type="xml">
				<data></data>
			</field>
		</record>

		<!-- FORMS -->	
		<record id="view_project_offer_field_form" model="ir.ui.view">
			<field name="name">project.offfer.field.form</field>
			<field name="model">project.offer.field</field>
			<field name="arch" type="xml">
				<form string="Thématique">
					<group colspan="2">
						<field name="name"/>
						<field name="description"/>
					</group>
				</form>
			</field>
		</record>

		<record id="view_project_submission_tree" model="ir.ui.view">
			<field name="name">project.submission.tree</field>
			<field name="model">project.submission</field>
			<field name="arch" type="xml">
				<tree string="Soumissions">
					<field name="name"/>
					<field name="offer"/>
					<field name="candidate"/>
					<field name="organisme"/>
					<field name="acronyme"/>
					<field name="field_ids"/>
					<field name="partners"/>
					<field name="budget"/>
				</tree>
			</field>
		</record>

		<record id="view_project_submission_form" model="ir.ui.view">
			<field name="name">project.submission.form</field>
			<field name="model">project.submission</field>
			<field name="arch" type="xml">
				<form string="Soumission">
				<header>
					<field name="state" widget="statusbar"/>
				</header>
					<sheet>
						<div class="oe_title">
							<label for="name" class="oe_edit_only"/>
							<h1><field name="name" class="oe_inline"/></h1>
						</div>
						<div class="oe_right" name="buttons">
							<div class="oe_button_box">
								<button class="oe_stat_button" icon="fa-book" name="action_get_attachment_tree_view" type="object">
									<field name="documents_count" widget="statinfo" string="Documents"/>
								</button>
								<button class="oe_stat_button" icon="fa-book" name="action_get_all_attachment_tree_view" type="object">
									<field name="all_documents_count" widget="statinfo" string="Documents associés"/>
								</button>
							</div>
						</div>
						<group>
						  	<group>
								<field name="acronyme"/>
								<field name="offer"/>
								<field name="candidate"/>
								<field name="partner" readonly="1"/>
								<field name="partner_mobile"/>
								<field name="organisme"/>
								<field name="manager"/>
							</group>
					 	 	<group>
					 	 		<field name="date_submitted" readonly="1" attrs="{'invisible': [('state','=','draft')]}"/>
								<field name="date_processed" readonly="1" attrs="{'invisible': [('state','in',['draft', 'submitted'])]}"/>
								<field name="priority" widget="priority"/>
								<field name="title_action"/>
								<field name="date_action"/>
								<field name="project" attrs="{'invisible': [('state','!=','accepted')]}"/>
							</group>
						</group>
						<group string="Informations générales">
							<field name="category" invisible="1"/>
							<notebook colspan="2">
								<page string="Description">
									<field name="description" widget="html"/>
								</page>
								<page string="État de l’art" attrs="{'invisible': [('category', '!=' ,'innoproject')]}">
									<field name="etat_art" widget="html"/>
								</page>
								<page string="Objectif global du projet" attrs="{'invisible': [('category', '!=' ,'innoproject')]}">
									<field name="objective" widget="html"/>
								</page>
								<page string="Objectifs spécifiques" attrs="{'invisible': [('category', '!=' ,'innoproject')]}">
									<field name="objectives" widget="html"/>
								</page>
								<page string="Perspectives d’application" attrs="{'invisible': [('category', '!=' ,'innoproject')]}">
									<field name="perspective" widget="html"/>
								</page>
								<page string="Retombées attendues du projet">
									<field name="fallout" widget="html"/>
								</page>
								<page string="Produits/Services/Process" attrs="{'invisible': [('category', '!=' ,'innoboost')]}">
									<field name="produits_services_process" widget="html"/>
								</page>
								<page string="Analyse Macro-environnementale" attrs="{'invisible': [('category', '!=' ,'innoboost')]}">
									<field name="analyse_macro" widget="html"/>
								</page>
								<page string="Analyse du marché" attrs="{'invisible': [('category', '!=' ,'innoboost')]}">
									<field name="analyse_marche" widget="html"/>
								</page>
								<page string="Cible" attrs="{'invisible': [('category', '!=' ,'innoboost')]}">
									<field name="cible" widget="html"/>
								</page>
								<page string="Analyse Compétitive" attrs="{'invisible': [('category', '!=' ,'innoboost')]}">
									<field name="analyse_competitive" widget="html"/>
								</page>
								<page string="Proposition de valeur" attrs="{'invisible': [('category', '!=' ,'innoboost')]}">
									<field name="proposition_valeur" widget="html"/>
								</page>
								<page string="Investissement et Retour" attrs="{'invisible': [('category', '!=' ,'innoboost')]}">
									<field name="invest_retour" widget="html"/>
								</page>
							</notebook>
							<group colspan="2">
								<field name="partners">
									<tree>
										<field name="category"/>
										<field name="name"/>
										<field name="mobile"/>
										<field name="email"/>
									</tree>
								</field>
							</group>
							<group>
								<field name="field_ids" widget="many2many_tags"/>
								<field name="keywords"/>
								<field name="duration"/>
							</group>
							<group>
								<field name="n_related_publications"/>
								<field name="n_ing_doc"/>
								<field name="n_master_pfe"/>
								<field name="survey" invisible="1"/>
								<field name="response"/>
							</group>
						</group>
						<group colspan="2" string="Informations financières">
							<group>
								<field name="budget"/>
								<field name="montant_propre"/>
							</group>
							<group>
								<field name="montant_subventionne"/>
								<field name="percent_propre"/>
							</group>
							<group colspan="2" string="Répartition financière">
								<field name="budget_lines">
									<tree editable="bottom">
										<field name="type"/>
										<field name="budget"/>
										<field name="montant_propre"/>
										<field name="montant_subventionne"/>
										<field name="percent_propre"/>
									</tree>
								</field>
							</group>
							<group colspan="2" string="Personnel">
								<field name="personnels">
									<tree editable="bottom">
										<field name="type"/>
										<field name="function"/>
										<field name="number"/>
										<field name="time"/>
										<field name="montant_propre"/>
										<field name="montant_demande"/>
										<field name="total"/>
									</tree>
								</field>
							</group>
							<group colspan="2" string="Coûts de financement propre">
								<field name="costs">
									<tree editable="bottom">
										<field name="partner"/>
										<field name="type"/>
										<field name="montant"/>
									</tree>
								</field>
							</group>
						</group>
						<group colspan="2" string="Tâches et livrables">
							<field name="tasks">
								<tree>
									<field name="type"/>
									<field name="name"/>
									<field name="semester"/>
									<field name="partner"/>
									<field name="partners"/>
									<field name="objectives"/>
									<field name="description"/>
									<field name="lots" widget="many2many_tags"/>
								</tree>
								<form>
									<group>
									<field name="type"/>
									<field name="name"/>
									<field name="semester"/>
									<field name="submission" invisible="1"/>
									<field name="all_partners" invisible="1"/>
									<field name="partner"/>
									<field name="partners"/>
									<field name="objectives"/>
									<field name="description"/>
									<field name="lots">
										<tree editable="bottom">
											<field name="type"/>
											<field name="name"/>
											<field name="month_due"/>
										</tree>
									</field></group>
								</form>
							</field>
						</group>
					</sheet>
				</form>
			</field>
		</record>

		<record id="view_project_offer_form" model="ir.ui.view">
			<field name="name">project.offer.form</field>
			<field name="model">project.offer</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form string="project offer">
					<header>
						<button name="action_open" string="Lancer l'offre" states="draft" type="object" class="oe_highlight" groups="base.group_user"/>
						<button name="action_close" string="Clôturer l'offre" states="open,done" type="object" class="oe_highlight" groups="base.group_user"/>
						<field name="state" widget="statusbar" statusbar_visible="draft,open,done,closed"/>
					</header>
					<sheet>
						<div class="oe_title">
							<label for="name" class="oe_edit_only"/>
							<h1><field name="name" class="oe_inline"/></h1>
							<label for="description"/>
							<field name="description"/>
						</div>
						<div class="oe_right" name="buttons">
							<div class="oe_button_box">
								<button class="oe_stat_button" icon="fa-file-o" name="%(action_project_submission)d" context="{'search_default_offer': [active_id], 'default_offer': active_id}" type="action">
									<field name="submissions_count" widget="statinfo" string="Soumissions"/>
								</button>
								<button class="oe_stat_button" icon="fa-book" name="action_get_attachment_tree_view" type="object">
									<field name="documents_count" widget="statinfo" string="Documents"/>
								</button>
							</div>
						</div>
					  	<group>
					  		<group>
								<field name="manager"/>
								<field name="category"/>
								<field name="type"/>
								<field name="host"/>
								<field name="budget_total"/>
								<field name="min_time"/>
								<field name="max_time"/>
								<field name="task_types" widget="many2many_tags"/>
							</group>
						  	<group>
								<field name="date_open"/>
								<field name="date_closed"/>
								<field name="accepted_count"/>
								<field name="survey" attrs="{'required': [('state','!=','draft')]}" class="oe_inline" domain="[('res_model','=','project_offer')]"/>
	   							<button string="Print Interview" name="action_print_survey" type="object" attrs="{'invisible':[('survey','=',False)]}" class="oe_inline oe_link"/>
							</group>
						</group>
					</sheet>
				
					<div class="oe_chatter">
						<field name="message_follower_ids" widget="mail_followers"/>
						<field name="message_ids" widget="mail_thread"/>
					</div>
				</form>
			</field>
		</record>
	
		<record id="view_project_candidate_form" model="ir.ui.view">
		<field name="name">project.candidate.form</field>
		<field name="model">res.users</field>
		<field name="mode">primary</field>
		<field name="inherit_id" ref="base.view_partner_form"/>
		<field name="arch" type="xml">
			<data>
				<div name="buttons" position="before">
					<div name="button_reset" class="oe_right oe_button_box">
						<button string="Réinitialiser le mot de passe" class="oe_link" type="object" name="action_reset_password"/>
					</div>
					<div name="buttons_submission" class="oe_right oe_button_box">
						<button class="oe_stat_button" icon="fa-file-o" name="%(action_project_submission)d" context="{'search_default_candidate': [active_id], 'default_candidate': active_id}" type="action">
							 <field name="submissions_count" widget="statinfo" string="Soumissions"/>
						</button>
						<button class="oe_stat_button" icon="fa-book" name="action_get_attachment_tree_view" type="object">
							<field name="documents_count" widget="statinfo" string="Documents"/>
						</button>
					</div>
				</div>
				<field name="name" position="after">
					<field name="login" placeholder="Login"/>
				</field>
			   </data>
		</field>
	</record>
	
		<record id="view_project_request_form" model="ir.ui.view">
		<field name="name">project.offer.type.form</field>
		<field name="model">project.offer.type</field>
		<field name="arch" type="xml">
			<form string="Types Offre">
				<sheet>
					<field name="name"/>
				</sheet>
			</form>
		</field>
	</record>

		

		<!-- MENUS -->
		<menuitem id="menu_project_submission_root" name="Appels à projets" sequence="10"/>

		<menuitem id="menu_project_submission_main" name="Appels à projets" parent="project_submission.menu_project_submission_root" sequence="0"/>
		<menuitem id="menu_project_submission_config" name="Configuration" parent="project_submission.menu_project_submission_root" sequence="10"/>

		<menuitem id="menu_project_offer" name="Offres" action="action_project_offer" parent="project_submission.menu_project_submission_main" sequence="0"/>
		<menuitem id="menu_project_submission" name="Soumissions" action="action_project_submission" parent="project_submission.menu_project_submission_main" sequence="10"/>
		<menuitem id="menu_project_candidate" name="Candidats" action="action_project_candidate" parent="project_submission.menu_project_submission_main" sequence="20"/>
		<menuitem id="menu_project_request" name="Demandes de ressources" action="action_project_request" parent="project_submission.menu_project_submission_main" sequence="20"/>

		<menuitem id="menu_project_offer_type" name="Types d'offres" action="action_project_offer_type" parent="project_submission.menu_project_submission_config" sequence="0"/>
		<menuitem id="menu_project_offer_field" name="Thématiques" action="action_project_offer_field" parent="project_submission.menu_project_submission_config" sequence="10"/>
		<menuitem id="menu_project_partner_function" name="Titres" action="action_project_partner_function" parent="project_submission.menu_project_submission_config" sequence="15"/>
		<menuitem id="menu_project_request_type" name="Types de demandes" action="action_project_request_type" parent="project_submission.menu_project_submission_config" sequence="20"/>
		<menuitem id="menu_project_submission_task_type" name="Types d'activité" action="action_project_submission_task_type" parent="project_submission.menu_project_submission_config" sequence="25"/>
		<menuitem id="menu_project_lot_type" name="Types de livrable" action="action_project_lot_type" parent="project_submission.menu_project_submission_config" sequence="26"/>
		<menuitem id="menu_project_budgetline_type" name="Types de lignes de budget" action="action_project_budgetline_type" parent="project_submission.menu_project_submission_config" sequence="30"/>

		<!-- REPORTS -->

    		<template id="report_submission_document">
		    <t t-call="report.external_layout">
		        <div class="page">
			        <script type="text/javascript">
				        $('textarea').each(function() {
				            $(this).height($(this).prop('scrollHeight'));
				        });
					</script>
					<style type="text/css">
						input, select, textarea {
							box-shadow: none !important;
							border-width: 0px 0px 1px 0px !important;
							border-radius: 0px !important;
						    -moz-appearance: none;
						    -webkit-appearance:none !important;
    						appearance: none !important;
						}
						select::-ms-expand {
						    display: none !important;
						}
						.hidden-print, .text-muted {
							display: none !important;
						}
						.print-only.form-control {
							height: inherit;
							max-height: inherit;
							box-shadow: none !important;
							border-width: 0px 0px 1px 0px !important;
							border-radius: 0px !important;
						}
					</style>
		            <div class="oe_structure"/>
					<t t-set="submission" t-value="o"/>
					<t t-set="error" t-value="{}"/>
		            <h2>
		                <span>Rapport de soumission</span>
		                <span t-field="o.name"/>
		            </h2>
		
		            <div class="row mt32 mb32" id="informations">
		                <div t-if="o.acronyme" class="col-xs-3">
		                    <strong>Acronyme:</strong>
		                    <p t-field="o.acronyme"/>
		                </div>
		                <div t-if="o.candidate" class="col-xs-3">
		                    <strong>Candidat: </strong>
		                    <p t-field="o.candidate"/>
		                </div>
		                <div t-if="o.offer" class="col-xs-3">
		                    <strong>Appel à projets:</strong>
		                    <p t-field="o.offer"/>
		                </div>
		                <div t-if="o.date_submitted" class="col-xs-3">
		                    <strong>Date de soumission:</strong>
		                    <p t-field="o.date_submitted"/>
		                </div>
		            </div>
		            <div class="row mt32">
		            	<t t-foreach="range(1,9)" t-as="current_stage">
	            			<t t-if="current_stage==1">
								<t t-call="website_project_submission.apply1"/></t>
                    		<p style="page-break-before:always;"> </p>
							<t t-if="current_stage==2">
								<t t-call="website_project_submission.apply2"/></t>
                    		<p style="page-break-before:always;"> </p>
							<t t-if="current_stage==3 or current_stage==4">
								<t t-call="website_project_submission.apply34"/></t>
                    		<p style="page-break-before:always;"> </p>
							<t t-if="current_stage==5">
								<t t-call="website_project_submission.apply5"/></t>
             				<p style="page-break-before:always;"> </p>
							<t t-if="current_stage==6">
								<t t-call="website_project_submission.apply6"/></t>
               			    <p style="page-break-before:always;"> </p>
							<t t-if="current_stage==7">
								<t t-call="website_project_submission.apply7"/></t>
                		    <!-- <p style="page-break-before:always;"> </p>
							<t t-if="current_stage==8">
								<t t-call="website_project_submission.apply8"/></t>-->
		            	</t>
		            </div>
		            <div class="oe_structure"/>
		        </div>
		    </t>
		</template>
		
		<template id="report_submission">
		    <t t-call="report.html_container">
		        <t t-foreach="doc_ids" t-as="doc_id">
		            <t t-raw="translate_doc(doc_id, doc_model, 'candidate.lang', 'project_submission.report_submission_document')"/>
		        </t>
		    </t>
		</template>

        <report 
            id="report_poject_submission"
            string="Rapport de soumission"
            model="project.submission" 
            report_type="qweb-pdf"
            file="Rapport de soumission"
            name="project_submission.report_submission"
        />
	</data>
</openerp>